# Examples

## Wallpaper pack workflows (A1111 + runner artifacts)

These examples demonstrate an end-to-end local workflow using the `a1111_txt2img` adapter and ChoomLang runner state/artifacts.

### Prerequisites

- Automatic1111 Stable Diffusion Web UI is running with API enabled (`--api`).
- The API is reachable at `http://127.0.0.1:7860` (default adapter URL / A1111 API endpoint).

### Run

From the repository root, use one of these profiles:

Fast profile (recommended default):

```bash
choom run examples/wallpaper_pack.choom --timeout 900
```

HD profile (heavier 1080p batch):

```bash
choom run examples/wallpaper_pack_hd.choom --timeout 2400
```

Recommended (explicit run folder):

```bash
choom run examples/wallpaper_pack.choom --workdir runs/<runid> --timeout 900
```

### Runtime and timeout guidance

- **Fast profile** (`1024x576`, `steps=14`, `n=1`): usually **30s-3m** per run on common local SDXL setups.
- **HD profile** (`1920x1080`, `steps=30`, `n=4`): usually **8-25m** per run depending on GPU/VRAM.
- Recommended `--timeout` values:
  - Fast: **`--timeout 900`** (raise to 1200 if your machine is slower)
  - HD: **`--timeout 2400`** (raise to 3000-3600 when increasing steps or batch size)

### Timeouts and canceling long generations

- If the ChoomLang client times out, A1111 may continue generating in the background.
- To stop in-progress jobs in A1111, call the interrupt API:

```bash
curl -X POST http://127.0.0.1:7860/sdapi/v1/interrupt
```

### Expected outputs

The runner writes outputs under your run workdir, especially:

- `runs/<runid>/artifacts/` (or `./artifacts/` if no `--workdir` is provided)
- PNG files generated by A1111 adapter with deterministic names
- `manifest.txt` containing the returned image path list
- `index.html` with a simple local gallery/manifest view

The workflows capture image list output in `id=images` and reuse it via interpolation (`@images`) when writing `manifest.txt` and `index.html`.
